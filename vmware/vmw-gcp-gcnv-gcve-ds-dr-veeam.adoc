---
sidebar: sidebar 
permalink: vmware/vmw-gcp-gcnv-gcve-ds-dr-veeam.html 
keywords: disaster recovery, avs, google cloud, gcp, gcve, gcnv, google cloud netapp volumes, netapp volumes, dr, veeam, replication 
summary:  
---
= Verwenden von Veeam Replication und Google Cloud NetApp Volumes -Datenspeicher für die Notfallwiederherstellung auf Google Cloud VMware Engine
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
Ein umfassender Notfallwiederherstellungsplan ist für Unternehmen in Krisenzeiten von entscheidender Bedeutung.  Viele Organisationen nutzen Cloud Computing für den täglichen Betrieb und die Notfallwiederherstellung.  Dieser proaktive Ansatz kann kostspielige Geschäftsunterbrechungen reduzieren oder vermeiden.

In diesem Artikel wird beschrieben, wie Sie mit Veeam Backup & Replication die Notfallwiederherstellung für lokale VMware-VMs auf Google Cloud VMware Engine (GCVE) mit Google Cloud NetApp Volumes (NetApp Volumes) einrichten.



== Überblick

Google Cloud NetApp Volumes ist ein Speicherdienst von Google und NetApp , der für Google Cloud verfügbar ist.  Der NetApp Volumes-Dienst bietet leistungsstarken NFS/SMB-Speicher.  VMware-zertifizierter NetApp Volumes NFS-Speicher kann als externer Datenspeicher für ESXi-Hosts in GCVE verwendet werden.  Benutzer müssen eine Peering-Verbindung zwischen ihrer privaten GCVE-Cloud und dem NetApp Volumes-Projekt herstellen.  Innerhalb einer Region fallen keine Netzgebühren für den Speicherzugriff an.  Benutzer können NetApp Volumes-Volumes in der Google Cloud-Konsole erstellen und den Löschschutz aktivieren, bevor sie Volumes als Datenspeicher auf ihren ESXi-Hosts bereitstellen.

Auf NetApp Volumes basierende NFS-Datenspeicher können zum Replizieren von Daten vor Ort mithilfe jeder validierten Drittanbieterlösung verwendet werden, die VM-Replikationsfunktionen bietet.  Durch das Hinzufügen von NetApp Volumes-Datenspeichern wird eine kostenoptimierte Bereitstellung ermöglicht, anstatt ein auf Google Cloud VMware Engine (GCVE) basierendes SDDC mit einer großen Anzahl von ESXi-Hosts zur Unterbringung des Speichers aufzubauen.  Dieser Ansatz wird als „Pilot Light Cluster“ bezeichnet.  Ein Pilot Light Cluster ist eine minimale GCVE-Hostkonfiguration (3 x GCVE ESXi-Hosts) zusammen mit der Kapazität von NetApp Volumes-Datenspeichern, um eine unabhängige Skalierung zur Erfüllung der Kapazitätsanforderungen zu ermöglichen.

Das Ziel besteht darin, eine kostengünstige Infrastruktur aufrechtzuerhalten, die nur die Kernkomponenten zur Verwaltung eines Failovers umfasst.  Ein Pilot Light-Cluster kann im Falle eines Failovers erweitert werden und weitere GCVE-Hosts hinzufügen.  Sobald das Failover behoben ist und der normale Betrieb wieder aufgenommen wird, kann der Pilot Light Cluster seine Größe reduzieren und in einen kostengünstigen Betriebsmodus zurückkehren.



== Zweck dieses Dokuments

In diesem Artikel wird beschrieben, wie Sie mithilfe eines Google Cloud NetApp Volumes -Datenspeichers mit Veeam Backup & Replication die Notfallwiederherstellung für lokale VMware-VMs zu GCVE mithilfe der VM-Replikationssoftwarefunktion von Veeam einrichten.

Veeam Backup & Replication ist eine Backup- und Replikationsanwendung für virtuelle Umgebungen.  Wenn virtuelle Maschinen repliziert werden, erstellt Veeam Backup & Replication eine exakte Kopie der VMs im nativen VMware vSphere-Format auf dem Ziel-GCVE-SDDC-Cluster.  Veeam Backup & Replication hält die Kopie mit der ursprünglichen VM synchronisiert.  Die Replikation bietet die beste Wiederherstellungszeit (RTO), da am DR-Standort eine bereitgestellte Kopie einer VM in einem startbereiten Zustand vorhanden ist.

Dieser Replikationsmechanismus stellt sicher, dass die Workloads im Katastrophenfall schnell in GCVE gestartet werden können.  Die Veeam Backup & Replication-Software optimiert außerdem die Verkehrsübertragung für die Replikation über WAN und langsame Verbindungen.  Darüber hinaus filtert es auch doppelte Datenblöcke, Null-Datenblöcke, Auslagerungsdateien und „ausgeschlossene VM-Gastbetriebssystemdateien“ heraus.  Die Software komprimiert außerdem den Replikationsverkehr.  Um zu verhindern, dass Replikationsaufträge die gesamte Netzwerkbandbreite verbrauchen, können WAN-Beschleuniger und Netzwerkdrosselungsregeln verwendet werden.

Der Replikationsprozess in Veeam Backup & Replication ist auftragsgesteuert, d. h. die Replikation wird durch die Konfiguration von Replikationsaufträgen durchgeführt.  Im Katastrophenfall kann ein Failover ausgelöst werden, um die VMs durch ein Failover auf ihre Replikatkopie wiederherzustellen.  Beim Failover übernimmt eine replizierte VM die Rolle der ursprünglichen VM.  Das Failover kann auf den neuesten Status einer Replik oder auf einen ihrer bekannten funktionierenden Wiederherstellungspunkte durchgeführt werden.  Dies ermöglicht bei Bedarf eine Ransomware-Wiederherstellung oder isolierte Tests.  Veeam Backup & Replication bietet mehrere Optionen zur Handhabung verschiedener Notfallwiederherstellungsszenarien.



== Lösungsübersicht

Diese Lösung umfasst die folgenden Schritte auf hoher Ebene:

. Erstellen Sie ein NFS-Volume mit Google Cloud NetApp Volumes
. Befolgen Sie den GCP-Prozess, um einen GCVE-Datenspeicher aus dem NFS-Volume von NetApp Volumes zu erstellen.
. Richten Sie einen Replikationsauftrag ein, um VM-Replikate mit Veeam Backup & Replication zu erstellen.
. Erstellen Sie einen Failover-Plan und führen Sie das Failover durch.
. Wechseln Sie zurück zu Produktions-VMs, sobald das Notfallereignis abgeschlossen ist und die primäre Site wieder aktiv ist.



NOTE: Beim Erstellen eines Volumes in NetApp Volumes zur Verwendung als GCVE-Datenspeicher wird nur NFS v3 unterstützt.

Weitere Informationen zur Verwendung von NetApp Volumes NFS-Volumes als Datenspeicher für GCVE finden Sie unter https://cloud.google.com/vmware-engine/docs/vmware-ecosystem/howto-cloud-volumes-datastores-gcve["Verwenden des NFS-Volumes als vSphere-Datenspeicher, der von Google Cloud NetApp Volumes gehostet wird"] .



== Architektur

Das folgende Diagramm zeigt die Architektur der in dieser Dokumentation vorgestellten Lösung.  Als bewährte Methode wird empfohlen, einen Veeam Backup & Replication-Server sowohl am Standort vor Ort als auch im GCVE SDDC zu haben.  Sicherung und Wiederherstellung werden vom Veeam-Server vor Ort durchgeführt und verwaltet, und die Replikation wird vom Veeam-Server im GCVE SDDC verwaltet.  Diese Architektur bietet die höchste Verfügbarkeit, wenn im primären Rechenzentrum ein Fehler auftritt.

image::dr-veeam-gcnv-001.png[Architekturdiagramm]



== Voraussetzungen für die Veeam-Replikation in GCVE- und NetApp Volumes-Datenspeichern

Diese Lösung erfordert die folgenden Komponenten und Konfigurationen:

. NetApp Volumes verfügt über einen Speicherpool mit ausreichend freier Kapazität, um das zu erstellende NFS-Volume aufzunehmen.
. Die Veeam Backup and Replication-Software wird in einer lokalen Umgebung mit entsprechender Netzwerkkonnektivität ausgeführt.
. Stellen Sie sicher, dass die Veeam Backup & Replication-Sicherungs-VM sowohl mit den Quell- als auch mit den Ziel-GCVE-SDDC-Clustern verbunden ist.
. Stellen Sie sicher, dass die Veeam Backup & Replication-Sicherungs-VM mit den Veeam Proxy-Server-VMs sowohl im Quell- als auch im Ziel-GCVE-Cluster verbunden ist.
. Der Sicherungsserver muss in der Lage sein, Kurznamen aufzulösen und eine Verbindung zu Quell- und Ziel-vCentern herzustellen.


Benutzer müssen eine Peering-Verbindung zwischen ihrer privaten GCVE-Cloud und dem NetApp Volumes-Projekt herstellen, indem sie die Seiten „VPC-Netzwerk-Peering“ oder „Private Verbindungen“ in der Benutzeroberfläche der VMware Engine Cloud-Konsole verwenden.


NOTE: Veeam erfordert ein GCVE-Lösungsbenutzerkonto mit erhöhten Berechtigungen, wenn der GCVE vCenter-Server zum Veeam Backup and Replication-Inventar hinzugefügt wird.  Weitere Informationen finden Sie in der Dokumentation zur Google Cloud Platform (GCP). https://cloud.google.com/vmware-engine/docs/private-clouds/classic-console/howto-elevate-privilege["Erhöhen der VMware Engine-Berechtigungen"] .

Weitere Informationen finden Sie unter https://helpcenter.veeam.com/docs/backup/vsphere/replica_limitations.html?ver=120["Überlegungen und Einschränkungen"] in der Veeam Backup & Replication-Dokumentation.



== Bereitstellungsschritte

In den folgenden Abschnitten werden die Bereitstellungsschritte zum Erstellen und Einbinden eines NFS-Datenspeichers mithilfe von Google Cloud NetApp Volumes und zur Verwendung von Veeam Backup and Replication zum Implementieren einer vollständigen Notfallwiederherstellungslösung zwischen einem lokalen Rechenzentrum und Google Cloud VMware Engine beschrieben.



=== Erstellen Sie ein NetApp Volumes NFS-Volume und einen Datenspeicher für GCVE

Siehe https://cloud.google.com/vmware-engine/docs/vmware-ecosystem/howto-cloud-volumes-datastores-gcve["Verwenden des NFS-Volumes als vSphere-Datenspeicher, der von Google Cloud NetApp Volumes gehostet wird"] für eine Übersicht zur Verwendung von Google Cloud NetApp Volumes als Datenspeicher für GCVE.

Führen Sie die folgenden Schritte aus, um einen NFS-Datenspeicher für GCVE mit NetApp Volumes zu erstellen und zu verwenden:

.NetApp Volumes NFS-Volume erstellen
[%collapsible%open]
====
Der Zugriff auf Google Cloud NetApp Volumes erfolgt über die Konsole der Google Cloud Platform (GCP).

Siehe https://cloud.google.com/netapp/volumes/docs/configure-and-use/volumes/create-volume["Erstellen eines Volumes"] Ausführliche Informationen zu diesem Schritt finden Sie in der Dokumentation zu Google Cloud NetApp Volumes .

. Navigieren Sie in einem Webbrowser zu https://console.cloud.google.com/[] und melden Sie sich bei Ihrer GCP-Konsole an.  Suchen Sie nach * NetApp Volumes*, um zu beginnen.
. Klicken Sie in der Verwaltungsoberfläche * NetApp Volumes* auf *Erstellen*, um mit der Erstellung eines NFS-Volumes zu beginnen.
+
image::dr-veeam-gcnv-002.png[Volumen erstellen]

+
{nbsp}

. Geben Sie im Assistenten „Volume erstellen“ alle erforderlichen Informationen ein:
+
** Ein Name für das Volume.
** Der Speicherpool, auf dem das Volume erstellt werden soll.
** Ein Freigabename, der beim Mounten des NFS-Volumes verwendet wird.
** Die Kapazität des Datenträgers in GiB.
** Das zu verwendende Speicherprotokoll.
** Aktivieren Sie das Kontrollkästchen, um *Löschen des Volumes zu verhindern, wenn Clients verbunden sind* (erforderlich für GCVE beim Mounten als Datenspeicher).
** Die Exportregeln für den Zugriff auf das Volume.  Dies sind die IP-Adressen der ESXi-Adapter im NFS-Netzwerk.
** Ein Snapshot-Zeitplan, der zum Schutz des Volumes mithilfe lokaler Snapshots verwendet wird.
** Optional können Sie das Volume sichern und/oder Bezeichnungen für das Volume erstellen.
+

NOTE: Beim Erstellen eines Volumes in NetApp Volumes zur Verwendung als GCVE-Datenspeicher wird nur NFS v3 unterstützt.

+
image::dr-veeam-gcnv-003.png[Volumen erstellen]

+
{nbsp}

+
image::dr-veeam-gcnv-004.png[Volumen erstellen]

+
{nbsp} Klicken Sie auf *Erstellen*, um die Erstellung des Volumes abzuschließen.



. Sobald das Volume erstellt ist, kann der zum Mounten des Volumes erforderliche NFS-Exportpfad auf der Eigenschaftenseite des Volumes angezeigt werden.
+
image::dr-veeam-gcnv-005.png[Volumeneigenschaften]



====
.Mounten Sie den NFS-Datenspeicher in GCVE
[%collapsible%open]
====
Zum Zeitpunkt des Schreibens dieses Artikels erfordert der Vorgang zum Mounten eines Datenspeichers in GCVE das Öffnen eines GCP-Supporttickets, um das Volume als NFS-Datenspeicher mounten zu lassen.

Siehe https://cloud.google.com/vmware-engine/docs/vmware-ecosystem/howto-cloud-volumes-datastores-gcve["Verwenden des NFS-Volumes als vSphere-Datenspeicher, der von Google Cloud NetApp Volumes gehostet wird"] für weitere Informationen.

====


=== Replizieren Sie VMs zu GCVE und führen Sie einen Failover-Plan und ein Failback aus

.Replizieren Sie VMs in den NFS-Datenspeicher in GCVE
[%collapsible%open]
====
Veeam Backup & Replication nutzt während der Replikation die Snapshot-Funktionen von VMware vSphere. Veeam Backup & Replication fordert VMware vSphere auf, einen VM-Snapshot zu erstellen.  Der VM-Snapshot ist die zeitpunktbezogene Kopie einer VM, die virtuelle Festplatten, Systemstatus, Konfiguration und Metadaten enthält.  Veeam Backup & Replication verwendet den Snapshot als Datenquelle für die Replikation.

Führen Sie zum Replizieren von VMs die folgenden Schritte aus:

. Öffnen Sie die Veeam Backup & Replication-Konsole.
. Klicken Sie auf der Registerkarte *Startseite* auf *Replikationsauftrag > Virtuelle Maschine...*
+
image::dr-veeam-gcnv-006.png[VM-Replikationsjob erstellen]

+
{nbsp}

. Geben Sie auf der Seite *Name* des Assistenten *Neuer Replikationsjob* einen Jobnamen an und aktivieren Sie die entsprechenden Kontrollkästchen für die erweiterte Steuerung.
+
** Aktivieren Sie das Kontrollkästchen „Replikat-Seeding“, wenn die Bandbreite der Konnektivität zwischen lokalen Standorten und GCP eingeschränkt ist.
** Aktivieren Sie das Kontrollkästchen „Netzwerkneuzuordnung (für GCVE SDDC-Sites mit unterschiedlichen Netzwerken), wenn die Segmente auf dem GCVE SDDC nicht mit denen der lokalen Site-Netzwerke übereinstimmen.
** Aktivieren Sie das Kontrollkästchen „Replikat-Re-IP (für DR-Sites mit unterschiedlichem IP-Adressschema)“, wenn sich das IP-Adressschema am lokalen Produktionsstandort vom Schema am GCVE-Zielstandort unterscheidet.
+
image::dr-veeam-gcnv-007.png[Namensseite]

+
{nbsp}



. Wählen Sie auf der Seite *Virtuelle Maschinen* die VMs aus, die in den NetApp Volumes-Datenspeicher repliziert werden sollen, der an ein GCVE SDDC angeschlossen ist.  Klicken Sie auf *Hinzufügen*, wählen Sie dann im Fenster *Objekt hinzufügen* die erforderlichen VMs oder VM-Container aus und klicken Sie auf *Hinzufügen*. Klicken Sie auf *Weiter*.
+

NOTE: Die virtuellen Maschinen können auf vSAN platziert werden, um die verfügbare vSAN-Datenspeicherkapazität zu füllen.  In einem Pilot-Light-Cluster ist die nutzbare Kapazität eines 3-Knoten-vSAN-Clusters begrenzt.  Die restlichen Daten können problemlos in Google Cloud NetApp Volumes -Datenspeichern abgelegt werden, sodass die VMs wiederhergestellt und der Cluster später erweitert werden kann, um die CPU-/Speicheranforderungen zu erfüllen.

+
image::dr-veeam-gcnv-008.png[Wählen Sie die zu replizierenden VMs aus]

+
{nbsp}

. Wählen Sie auf der Seite *Ziel* als Ziel den GCVE SDDC-Cluster/Hosts und den entsprechenden Ressourcenpool, VM-Ordner und NetApp Volumes-Datenspeicher für die VM-Replikate aus.  Klicken Sie auf *Weiter*, um fortzufahren.
+
image::dr-veeam-gcnv-009.png[Zieldetails auswählen]

+
{nbsp}

. Erstellen Sie auf der Seite *Netzwerk* nach Bedarf die Zuordnung zwischen virtuellen Quell- und Zielnetzwerken.  Klicken Sie auf *Weiter*, um fortzufahren.
+
image::dr-veeam-gcnv-010.png[Netzwerkzuordnung]

+
{nbsp}

. Klicken Sie auf der Seite *Re-IP* auf die Schaltfläche *Hinzufügen...*, um eine neue Re-IP-Regel hinzuzufügen.  Füllen Sie die IP-Bereiche der Quell- und Ziel-VM aus, um das Netzwerk anzugeben, das im Falle eines Failovers auf die Quell-VMs angewendet wird.  Verwenden Sie Sternchen, um einen Adressbereich anzugeben, der für dieses Oktett angegeben ist.  Klicken Sie auf *Weiter*, um fortzufahren.
+
image::dr-veeam-gcnv-011.png[Re-IP-Seite]

+
{nbsp}

. Geben Sie auf der Seite *Jobeinstellungen* das Sicherungsrepository an, in dem Metadaten für VM-Replikate gespeichert werden, sowie die Aufbewahrungsrichtlinie und wählen Sie unten die Schaltfläche *Erweitert...* für zusätzliche Jobeinstellungen aus.  Klicken Sie auf *Weiter*, um fortzufahren.
. Wählen Sie bei der *Datenübertragung* die Proxyserver aus, die sich an den Quell- und Zielstandorten befinden, und lassen Sie die Option „Direkt“ ausgewählt.  Auch WAN-Beschleuniger können hier ausgewählt werden, sofern konfiguriert.  Klicken Sie auf *Weiter*, um fortzufahren.
+
image::dr-veeam-gcnv-012.png[Datenübertragung]

+
{nbsp}

. Aktivieren Sie auf der Seite *Gastverarbeitung* bei Bedarf das Kontrollkästchen *Anwendungsbewusste Verarbeitung aktivieren* und wählen Sie die *Anmeldeinformationen des Gastbetriebssystems* aus.  Klicken Sie auf *Weiter*, um fortzufahren.
+
image::dr-veeam-gcnv-013.png[Gästeabwicklung]

+
{nbsp}

. Definieren Sie auf der Seite *Zeitplan* die Zeiten und die Häufigkeit, mit der der Replikationsauftrag ausgeführt werden soll.  Klicken Sie auf *Weiter*, um fortzufahren.
+
image::dr-veeam-gcnv-014.png[Seite „Zeitplan“]

+
{nbsp}

. Überprüfen Sie abschließend die Jobeinstellungen auf der Seite *Zusammenfassung*.  Aktivieren Sie das Kontrollkästchen „Job ausführen, wenn ich auf „Fertig stellen“ klicke“ und klicken Sie auf „Fertig stellen“, um die Erstellung des Replikationsjobs abzuschließen.
. Nach der Ausführung kann der Replikationsauftrag im Auftragsstatusfenster angezeigt werden.
+
image::dr-veeam-gcnv-015.png[Auftragsstatusfenster]

+
Weitere Informationen zur Veeam-Replikation finden Sie unterlink:https://helpcenter.veeam.com/docs/backup/vsphere/replication_process.html?ver=120["Funktionsweise der Replikation"]



====
.Erstellen eines Failoverplans
[%collapsible%open]
====
Wenn die erste Replikation oder das Seeding abgeschlossen ist, erstellen Sie den Failover-Plan.  Der Failover-Plan hilft dabei, das Failover für abhängige VMs einzeln oder als Gruppe automatisch durchzuführen.  Der Failover-Plan ist die Blaupause für die Reihenfolge, in der die VMs verarbeitet werden, einschließlich der Startverzögerungen.  Der Failover-Plan hilft auch sicherzustellen, dass kritische abhängige VMs bereits ausgeführt werden.

Erstellen Sie nach Abschluss der ersten Replikation oder des Seedings einen Failover-Plan.  Dieser Plan dient als strategischer Entwurf für die Orchestrierung des Failovers abhängiger VMs, entweder einzeln oder als Gruppe.  Es definiert die Verarbeitungsreihenfolge der VMs, berücksichtigt notwendige Startverzögerungen und stellt sicher, dass kritische abhängige VMs vor anderen betriebsbereit sind.  Durch die Implementierung eines gut strukturierten Failover-Plans können Unternehmen ihren Disaster-Recovery-Prozess optimieren, Ausfallzeiten minimieren und die Integrität voneinander abhängiger Systeme während eines Failover-Ereignisses aufrechterhalten.

Beim Erstellen des Plans identifiziert und verwendet Veeam Backup & Replication automatisch die aktuellsten Wiederherstellungspunkte, um die VM-Replikate zu initiieren.


NOTE: Der Failover-Plan kann erst erstellt werden, wenn die erste Replikation abgeschlossen ist und sich die VM-Replikate im Status „Bereit“ befinden.


NOTE: Die maximale Anzahl an VMs, die beim Ausführen eines Failover-Plans gleichzeitig gestartet werden können, beträgt 10.


NOTE: Während des Failover-Prozesses werden die Quell-VMs nicht ausgeschaltet.

Führen Sie die folgenden Schritte aus, um den *Failover-Plan* zu erstellen:

. Klicken Sie in der *Startseite*-Ansicht im Abschnitt *Wiederherstellen* auf die Schaltfläche *Failover-Plan*.  Wählen Sie im Dropdown-Menü *VMware vSphere...* aus.
+
image::dr-veeam-gcnv-016.png[Erstellen eines Failover-Plans]

+
{nbsp}

. Geben Sie auf der Seite *Allgemein* des Assistenten *Neuer Failoverplan* einen Namen und eine Beschreibung für den Plan ein.  Bei Bedarf können Skripte vor und nach dem Failover hinzugefügt werden.  Führen Sie beispielsweise ein Skript aus, um VMs herunterzufahren, bevor Sie die replizierten VMs starten.
+
image::dr-veeam-gcnv-017.png[Seite „Allgemein“]

+
{nbsp}

. Klicken Sie auf der Seite *Virtuelle Maschinen* auf die Schaltfläche *VM hinzufügen* und wählen Sie *Aus Replikaten...*.  Wählen Sie die VMs aus, die Teil des Failover-Plans sein sollen, und ändern Sie dann die VM-Startreihenfolge und alle erforderlichen Startverzögerungen, um Anwendungsabhängigkeiten zu erfüllen.
+
image::dr-veeam-gcnv-018.png[Seite „Virtuelle Maschinen“]

+
{nbsp}

+
image::dr-veeam-gcnv-019.png[Startreihenfolge und Verzögerungen]

+
{nbsp}

+
Klicken Sie auf *Übernehmen*, um fortzufahren.

. Überprüfen Sie abschließend alle Failover-Planeinstellungen und klicken Sie auf *Fertig*, um den Failover-Plan zu erstellen.


Weitere Informationen zum Erstellen von Replikationsaufträgen finden Sie unterlink:https://helpcenter.veeam.com/docs/backup/vsphere/replica_job.html?ver=120["Erstellen von Replikationsjobs"] .

====
.Ausführen des Failoverplans
[%collapsible%open]
====
Während des Failovers wechselt die Quell-VM am Produktionsstandort zu ihrer Replik am Notfallwiederherstellungsstandort.  Als Teil des Prozesses stellt Veeam Backup & Replication die VM-Replik am erforderlichen Wiederherstellungspunkt wieder her und überträgt alle E/A-Aktivitäten von der Quell-VM auf ihre Replik.  Replikate dienen nicht nur für tatsächliche Katastrophen, sondern auch zur Simulation von DR-Übungen.  Bei der Failover-Simulation läuft die Quell-VM weiter.  Nach Abschluss der erforderlichen Tests kann das Failover rückgängig gemacht und der Betrieb wieder normalisiert werden.


NOTE: Stellen Sie sicher, dass eine Netzwerksegmentierung vorhanden ist, um IP-Konflikte während des Failovers zu vermeiden.

Führen Sie die folgenden Schritte aus, um den Failover-Plan zu starten:

. Um zu beginnen, klicken Sie in der *Startseite*-Ansicht im linken Menü auf *Replikate > Failover-Pläne* und dann auf die Schaltfläche *Start*.  Alternativ kann die Schaltfläche *Starten mit...* verwendet werden, um ein Failover zu einem vorherigen Wiederherstellungspunkt durchzuführen.
+
image::dr-veeam-gcnv-020.png[Failover-Plan starten]

+
{nbsp}

. Überwachen Sie den Fortschritt des Failovers im Fenster *Failover-Plan wird ausgeführt*.
+
image::dr-veeam-gcnv-021.png[Überwachen des Failover-Fortschritts]

+
{nbsp}




NOTE: Veeam Backup & Replication stoppt alle Replikationsaktivitäten für die Quell-VM, bis deren Replikat wieder in den Zustand „Bereit“ versetzt wird.

Ausführliche Informationen zu Failover-Plänen finden Sie unterlink:https://helpcenter.veeam.com/docs/backup/vsphere/failover_plan.html?ver=120["Failover-Pläne"] .

====
.Failback zum Produktionsstandort
[%collapsible%open]
====
Die Durchführung eines Failovers wird als Zwischenschritt betrachtet und muss je nach Bedarf abgeschlossen werden.  Zu den Optionen gehören die folgenden:

* *Failback zur Produktion* – Kehren Sie zur ursprünglichen VM zurück und synchronisieren Sie alle während der aktiven Phase der Replik vorgenommenen Änderungen zurück zur Quell-VM.



NOTE: Beim Failback werden Änderungen übertragen, aber nicht sofort angewendet.  Wählen Sie *Failback festschreiben*, sobald die Funktionalität der ursprünglichen VM überprüft wurde.  Alternativ können Sie *Failback rückgängig machen* wählen, um zur VM-Replik zurückzukehren, wenn die ursprüngliche VM ein unerwartetes Verhalten zeigt.

* *Failover rückgängig machen* – Kehren Sie zur ursprünglichen VM zurück und verwerfen Sie alle während der Betriebszeit an der VM-Replik vorgenommenen Änderungen.
* *Permanentes Failover* – Wechseln Sie dauerhaft von der ursprünglichen VM zu ihrer Replik und richten Sie die Replik als neue primäre VM für laufende Vorgänge ein.


In diesem Szenario wurde die Option „Failback zur Produktion“ ausgewählt.

Führen Sie die folgenden Schritte aus, um ein Failback zur Produktionssite durchzuführen:

. Klicken Sie in der *Startseite*-Ansicht im linken Menü auf *Replikate > Aktiv*.  Wählen Sie die einzubindenden VMs aus und klicken Sie im oberen Menü auf die Schaltfläche *Failback zur Produktion*.
+
image::dr-veeam-gcnv-022.png[Failback starten]

+
{nbsp}

. Wählen Sie auf der Seite *Replikat* des *Failback*-Assistenten die Replikate aus, die in den Failback-Job einbezogen werden sollen.
. Wählen Sie auf der Seite *Ziel* die Option *Failback zur ursprünglichen VM* und klicken Sie auf *Weiter*, um fortzufahren.
+
image::dr-veeam-gcnv-023.png[Failback zur ursprünglichen VM]

+
{nbsp}

. Wählen Sie auf der Seite *Failback-Modus* *Auto* aus, um das Failback so schnell wie möglich zu starten.
+
image::dr-veeam-gcnv-024.png[Failback-Modus]

+
{nbsp}

. Wählen Sie auf der Seite *Zusammenfassung* aus, ob die *Ziel-VM nach der Wiederherstellung eingeschaltet* werden soll, und klicken Sie dann auf „Fertig stellen“, um den Failback-Job zu starten.
+
image::dr-veeam-gcnv-025.png[Failback-Auftragszusammenfassung]

+
{nbsp}



Das Failback-Commit schließt den Failback-Vorgang ab und bestätigt die erfolgreiche Integration der Änderungen in die Produktions-VM.  Nach dem Commit nimmt Veeam Backup & Replication die regulären Replikationsaktivitäten für die wiederhergestellte Produktions-VM wieder auf.  Dadurch ändert sich der Status der wiederhergestellten Replik von _Failback_ in _Bereit_.

. Um ein Failback durchzuführen, navigieren Sie zu *Replikate > Aktiv*, wählen Sie die VMs aus, für die ein Failback durchgeführt werden soll, klicken Sie mit der rechten Maustaste und wählen Sie *Failback durchführen*.
+
image::dr-veeam-gcnv-026.png[Commit-Failback]

+
{nbsp}

+
image::dr-veeam-gcnv-027.png[Commit-Failback erfolgreich]

+
{nbsp} Nach einem erfolgreichen Failback zur Produktion werden alle VMs wieder am ursprünglichen Produktionsstandort wiederhergestellt.



Ausführliche Informationen zum Failback-Prozess finden Sie in der Veeam-Dokumentation fürlink:https://helpcenter.veeam.com/docs/backup/vsphere/failover_failback.html?ver=120["Failover und Failback für die Replikation"] .

====


== Abschluss

Die Datenspeicherfunktionalität von Google Cloud NetApp Volumes ermöglicht Veeam und anderen validierten Tools von Drittanbietern die Bereitstellung kostengünstiger Disaster Recovery-Lösungen (DR).  Durch die Verwendung von Pilot Light-Clustern anstelle großer, dedizierter Cluster für VM-Replikate können Unternehmen ihre Kosten erheblich senken.  Dieser Ansatz ermöglicht maßgeschneiderte DR-Strategien, die vorhandene interne Backup-Lösungen für die Cloud-basierte Notfallwiederherstellung nutzen und so den Bedarf an zusätzlichen Rechenzentren vor Ort überflüssig machen.  Im Katastrophenfall kann das Failover mit einem einzigen Klick eingeleitet oder so konfiguriert werden, dass es automatisch erfolgt, wodurch die Geschäftskontinuität mit minimalen Ausfallzeiten gewährleistet wird.

Um mehr über diesen Vorgang zu erfahren, können Sie sich gerne das ausführliche Walkthrough-Video ansehen.

video::b2fb8597-c3fe-49e2-8a84-b1f10118db6d[panopto,width=Video walkthrough of the solution]